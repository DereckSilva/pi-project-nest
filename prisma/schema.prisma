// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model EmpresaClientes {
  codEmpresa          Int           @id @default(autoincrement())
  razaoSocialEmpresa  String        @db.VarChar(25)
  nomeFantasiaEmpresa String        @db.VarChar(35)
  cnpjEmpresa         String        @unique @db.VarChar(14)
  emailEmpresa        String        @db.VarChar(50)
  areaAtuacaoEmpresa  String        @db.VarChar(20)
  telefoneEmpresa     String        @db.VarChar(15)
  enderecoEmpresa     String        @db.VarChar(75)
  usuariosAdm         UsuariosAdm[]
  EmpresaTicket       Tickets[]     @relation("EmpresaTicket")
  CnpjTicket          Tickets[]     @relation("CnpjTicket")
}

model UsuariosAdm {
  codUsuario        Int             @id @default(autoincrement())
  nomeUsuario       String          @db.VarChar(20)
  cpfUsuario        String          @db.VarChar(11)
  telefoneUsuario   String?
  emailUsuario      String          @db.VarChar(50)
  senhaUsuario      String          @db.VarChar(8)
  empresaUsuario    EmpresaClientes @relation(fields: [codEmpresaUsuario], references: [codEmpresa])
  codEmpresaUsuario Int
}

model Tickets {
  numTicket             Int      @id @default(autoincrement())
  nomeClienteTicket     String?  @db.VarChar(50)
  statusTicket          String   @db.VarChar(25)
  tipoTicket            String   @db.VarChar(20)
  descricaoTicket       String   @db.VarChar(200)
  dataAberturaTicket    DateTime
  dataUltimaModTicket   DateTime
  descricaoAjusteTicket String   @db.VarChar(200)
  observacaoTicket      String   @db.VarChar(200)
  emailContatoTicket    String   @db.VarChar(50)
  telContatoTicket      String   @db.VarChar()

  empresaTicket     EmpresaClientes @relation("EmpresaTicket", fields: [codEmpresaTicket], references: [codEmpresa])
  cnpjTicket        EmpresaClientes @relation("CnpjTicket", fields: [cnpjEmpresaTicket], references: [cnpjEmpresa])
  cnpjEmpresaTicket String          @db.VarChar(15)
  codEmpresaTicket  Int
}
